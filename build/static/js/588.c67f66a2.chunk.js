"use strict";(self.webpackChunkmysasnaka=self.webpackChunkmysasnaka||[]).push([[588],{8588:(e,s,a)=>{a.r(s),a.d(s,{default:()=>w});var l=a(9060),r=a(6936),i=a(2448),c=a(1112),t=a(5556),o=a(3284),n=a(2496);function d(){const[e,s]=(0,l.useState)(null),[a,r]=(0,l.useState)(null),i=localStorage.getItem("auth"),{theater:d}=i?JSON.parse(i):{theater:""};(0,l.useEffect)((()=>{(async()=>{try{const e=await(0,t.ie)("profile/details/"+d);s(e.data.data)}catch(e){(0,o.W)("Something Went Wrong","error")}})()}),[]);return(0,l.useEffect)((()=>{if(e){(async()=>{const s=await(async e=>{try{const s=await fetch("https://restcountries.com/v3.1/alpha/".concat(e.toUpperCase()));if(!s.ok)throw new Error("Country not found");const a=await s.json();return console.log(a[0]),a[0]}catch(s){return console.error(s),""}})(e.theaterData.country);r(s)})()}}),[e]),(0,n.jsx)(n.Fragment,{children:e?(0,n.jsxs)("div",{className:"card mb-5 mb-xl-10",id:"kt_profile_details_view",children:[(0,n.jsxs)("div",{className:"card-header cursor-pointer",children:[(0,n.jsx)("div",{className:"card-title m-0",children:(0,n.jsx)("h3",{className:"fw-bolder m-0",children:"Profile Details"})}),(0,n.jsx)(c.cH,{to:"/crafted/account/settings",className:"btn btn-primary align-self-center",children:"Edit Profile"})]}),(0,n.jsxs)("div",{className:"card-body p-9",children:[(0,n.jsxs)("div",{className:"row mb-7",children:[(0,n.jsx)("label",{className:"col-lg-4 fw-bold text-muted",children:"Full Name"}),(0,n.jsx)("div",{className:"col-lg-8",children:(0,n.jsxs)("span",{className:"fw-bolder fs-6 text-dark",children:[e.adminData.first_name," ",e.adminData.last_name]})})]}),(0,n.jsxs)("div",{className:"row mb-7",children:[(0,n.jsx)("label",{className:"col-lg-4 fw-bold text-muted",children:"Contact Email"}),(0,n.jsx)("div",{className:"col-lg-8",children:(0,n.jsxs)("span",{className:"fw-bolder fs-6 text-dark",children:[" ",e.adminData.email]})})]}),(0,n.jsxs)("div",{className:"row mb-7",children:[(0,n.jsx)("label",{className:"col-lg-4 fw-bold text-muted",children:"Role"}),(0,n.jsx)("div",{className:"col-lg-8",children:(0,n.jsx)("span",{className:"fw-bolder fs-6 text-dark",children:"Theater Admin"})})]}),(0,n.jsxs)("div",{className:"row mb-7",children:[(0,n.jsx)("label",{className:"col-lg-4 fw-bold text-muted",children:"Theater"}),(0,n.jsx)("div",{className:"col-lg-8 fv-row",children:(0,n.jsx)("span",{className:"fw-bold fs-6",children:e.theaterData.name})})]}),(0,n.jsxs)("div",{className:"row mb-7",children:[(0,n.jsx)("label",{className:"col-lg-4 fw-bold text-muted",children:"Business Email"}),(0,n.jsxs)("div",{className:"col-lg-8 d-flex align-items-center",children:[(0,n.jsx)("span",{className:"fw-bolder fs-6 me-2",children:e.theaterData.business_email}),(0,n.jsx)("span",{className:"badge badge-success",children:"Verified"})]})]}),(0,n.jsxs)("div",{className:"row mb-7",children:[(0,n.jsx)("label",{className:"col-lg-4 fw-bold text-muted",children:"Theater Description"}),(0,n.jsx)("div",{className:"col-lg-8 d-flex align-items-center",children:(0,n.jsx)("span",{className:"fw-bolder fs-6 me-2",children:e.theaterData.description})})]}),(0,n.jsxs)("div",{className:"row mb-7",children:[(0,n.jsx)("label",{className:"col-lg-4 fw-bold text-muted",children:"Address"}),(0,n.jsx)("div",{className:"col-lg-8",children:(0,n.jsx)("span",{className:"fw-bolder fs-6 text-dark",children:e.theaterData.address})})]}),(0,n.jsxs)("div",{className:"row mb-7",children:[(0,n.jsx)("label",{className:"col-lg-4 fw-bold text-muted",children:"Location"}),(0,n.jsx)("div",{className:"col-lg-8",children:(0,n.jsx)("span",{className:"fw-bolder fs-6 text-dark",children:e.theaterData.location})})]}),(0,n.jsxs)("div",{className:"row mb-7",children:[(0,n.jsx)("label",{className:"col-lg-4 fw-bold text-muted",children:"Country"}),(0,n.jsx)("div",{className:"col-lg-8",children:(0,n.jsxs)("span",{className:"fw-bolder fs-6 text-dark",children:[a?a.name.common:null,(0,n.jsx)("img",{src:a?a.flags.png:null,className:"mx-2",style:{objectFit:"contain",width:"40px"}})]})})]}),(0,n.jsxs)("div",{className:"row mb-10",children:[(0,n.jsx)("label",{className:"col-lg-4 fw-bold text-muted",children:"Allow Changes"}),(0,n.jsx)("div",{className:"col-lg-8",children:(0,n.jsx)("span",{className:"fw-bold fs-6",children:"Yes"})})]})]})]}):null})}var m=a(3472),h=a(4568),x=a(2524),u=a(8372),f=a(6240);const j=h.kt().shape({firstName:h.Qb().required("First name is required"),lastName:h.Qb().required("Last name is required"),email:h.Qb().email("Invalid email").required("Email is required"),name:h.Qb().required("Name is required"),businessEmail:h.Qb().email("Invalid email").required("Business email is required"),description:h.Qb(),address:h.Qb().required("Address is required"),location:h.Qb().required("Location is required"),country:h.Qb().required("Country is required")}),p={firstName:"",lastName:"",email:"",name:"",businessEmail:"",description:"",address:"",location:"",country:""},b=e=>{let{setRefresh:s,refresh:a}=e;(0,r.IT)();const i=(0,r.i6)(),c=localStorage.getItem("auth"),{theater:d}=c?JSON.parse(c):{theater:""},[h,b]=(0,l.useState)([]),[N,v]=(0,l.useState)(!1),[g,w]=(0,l.useState)(null),[y,k]=(0,l.useState)([]);(0,l.useEffect)((()=>{(async()=>{try{const e=(await(0,t.ie)("profile/details/"+d)).data.data;D.setValues({firstName:e.adminData.first_name,lastName:e.adminData.last_name,email:e.adminData.email,name:e.theaterData.name,businessEmail:e.theaterData.business_email,description:e.theaterData.description,address:e.theaterData.address,location:e.theaterData.location,country:e.theaterData.country}),w(e.adminData.image)}catch(e){(0,o.W)("Something Went Wrong","error")}})()}),[]);const D=(0,x.KO)({initialValues:p,validationSchema:j,onSubmit:async e=>{if(!g)return void(0,o.W)("Please Upload An Image","error");const l={...e,theater:d,image:g};try{await(0,t.ey)(l,"profile/set");(0,o.W)("Chnages Applied","success"),s(!a),i("/crafted/account/overview")}catch(r){(0,o.W)(r.response.data.error,"error"),console.error("Error:",r)}}});return(0,l.useEffect)((()=>{(async()=>{try{const e=await u.c.get("https://restcountries.com/v3.1/all");k(e.data)}catch(e){console.error("Error fetching countries:",e)}})()}),[]),(0,n.jsxs)("div",{className:"card mb-5 mb-xl-10",children:[(0,n.jsx)("div",{className:"card-header border-0 cursor-pointer",role:"button","data-bs-toggle":"collapse","data-bs-target":"#kt_account_profile_details","aria-expanded":"true","aria-controls":"kt_account_profile_details",children:(0,n.jsx)("div",{className:"card-title m-0",children:(0,n.jsx)("h3",{className:"fw-bolder m-0",children:"Edit Profile Details"})})}),(0,n.jsx)("div",{id:"kt_account_profile_details",className:"collapse show",children:(0,n.jsxs)("form",{onSubmit:D.handleSubmit,noValidate:!0,className:"form",children:[(0,n.jsxs)("div",{className:"card-body border-top p-9",children:[(0,n.jsxs)("div",{className:"row mb-6",children:[(0,n.jsx)("label",{className:"col-lg-4 col-form-label fw-bold fs-6",children:"Avatar"}),(0,n.jsx)("div",{className:"col-lg-8",children:(0,n.jsx)("div",{className:"image-input image-input-outline","data-kt-image-input":"true",style:{backgroundImage:"url(".concat((0,m.IT)("/media/avatars/blank.png"),")")},children:(0,n.jsx)(f.c,{image:g,setImage:w})})})]}),(0,n.jsxs)("div",{className:"row mb-6",children:[(0,n.jsx)("label",{className:"col-lg-4 col-form-label required fw-bold fs-6",children:"Full Name"}),(0,n.jsx)("div",{className:"col-lg-8",children:(0,n.jsxs)("div",{className:"row",children:[(0,n.jsxs)("div",{className:"col-lg-6 fv-row",children:[(0,n.jsx)("input",{type:"text",className:"form-control form-control-lg form-control-solid mb-3 mb-lg-0",placeholder:"First name",...D.getFieldProps("firstName")}),D.touched.firstName&&D.errors.firstName&&(0,n.jsx)("div",{className:"fv-plugins-message-container",children:(0,n.jsx)("div",{className:"fv-help-block",children:D.errors.firstName})})]}),(0,n.jsxs)("div",{className:"col-lg-6 fv-row",children:[(0,n.jsx)("input",{type:"text",className:"form-control form-control-lg form-control-solid",placeholder:"Last name",...D.getFieldProps("lastName")}),D.touched.lastName&&D.errors.lastName&&(0,n.jsx)("div",{className:"fv-plugins-message-container",children:(0,n.jsx)("div",{className:"fv-help-block",children:D.errors.lastName})})]})]})})]}),(0,n.jsxs)("div",{className:"row mb-6",children:[(0,n.jsx)("label",{className:"col-lg-4 col-form-label required fw-bold fs-6",children:"Contact Email"}),(0,n.jsxs)("div",{className:"col-lg-8 fv-row",children:[(0,n.jsx)("input",{type:"text",className:"form-control form-control-lg form-control-solid",placeholder:"Contact Email",...D.getFieldProps("email")}),D.touched.email&&D.errors.email&&(0,n.jsx)("div",{className:"fv-plugins-message-container",children:(0,n.jsx)("div",{className:"fv-help-block",children:D.errors.email})})]})]}),(0,n.jsxs)("div",{className:"row mb-6",children:[(0,n.jsx)("label",{className:"col-lg-4 col-form-label fw-bold fs-6",children:(0,n.jsx)("span",{className:"required",children:"Theater Name"})}),(0,n.jsxs)("div",{className:"col-lg-8 fv-row",children:[(0,n.jsx)("input",{type:"tel",className:"form-control form-control-lg form-control-solid",placeholder:"Theater Name",...D.getFieldProps("name")}),D.touched.name&&D.errors.name&&(0,n.jsx)("div",{className:"fv-plugins-message-container",children:(0,n.jsx)("div",{className:"fv-help-block",children:D.errors.name})})]})]}),(0,n.jsxs)("div",{className:"row mb-6",children:[(0,n.jsx)("label",{className:"col-lg-4 col-form-label fw-bold fs-6",children:(0,n.jsx)("span",{className:"required",children:"Business Email"})}),(0,n.jsxs)("div",{className:"col-lg-8 fv-row",children:[(0,n.jsx)("input",{type:"text",className:"form-control form-control-lg form-control-solid",placeholder:"Business Email",...D.getFieldProps("businessEmail")}),D.touched.businessEmail&&D.errors.businessEmail&&(0,n.jsx)("div",{className:"fv-plugins-message-container",children:(0,n.jsx)("div",{className:"fv-help-block",children:D.errors.businessEmail})})]})]}),(0,n.jsxs)("div",{className:"row mb-6",children:[(0,n.jsx)("label",{className:"col-lg-4 col-form-label fw-bold fs-6",children:(0,n.jsx)("span",{className:"required",children:"Theater Description"})}),(0,n.jsxs)("div",{className:"col-lg-8 fv-row",children:[(0,n.jsx)("input",{type:"text",className:"form-control form-control-lg form-control-solid",placeholder:"Theater Description",...D.getFieldProps("description")}),D.touched.description&&D.errors.description&&(0,n.jsx)("div",{className:"fv-plugins-message-container",children:(0,n.jsx)("div",{className:"fv-help-block",children:D.errors.description})})]})]}),(0,n.jsxs)("div",{className:"row mb-6",children:[(0,n.jsx)("label",{className:"col-lg-4 col-form-label fw-bold fs-6",children:(0,n.jsx)("span",{className:"required",children:"Theater Address"})}),(0,n.jsxs)("div",{className:"col-lg-8 fv-row",children:[(0,n.jsx)("input",{type:"text",className:"form-control form-control-lg form-control-solid",placeholder:"Theater Address",...D.getFieldProps("address")}),D.touched.address&&D.errors.address&&(0,n.jsx)("div",{className:"fv-plugins-message-container",children:(0,n.jsx)("div",{className:"fv-help-block",children:D.errors.address})})]})]}),(0,n.jsxs)("div",{className:"row mb-6",children:[(0,n.jsx)("label",{className:"col-lg-4 col-form-label fw-bold fs-6",children:(0,n.jsx)("span",{className:"required",children:"Theater Location"})}),(0,n.jsxs)("div",{className:"col-lg-8 fv-row",children:[(0,n.jsxs)("select",{className:"shadow-sm form-select form-select-solid form-select-lg fw-bold",...D.getFieldProps("location"),children:[(0,n.jsx)("option",{value:"",children:"Select Theater Location"}),(0,n.jsx)("option",{value:"Ampara",children:"Ampara"}),(0,n.jsx)("option",{value:"Anuradhapura",children:"Anuradhapura"}),(0,n.jsx)("option",{value:"Badulla",children:"Badulla"}),(0,n.jsx)("option",{value:"Batticaloa",children:"Batticaloa"}),(0,n.jsx)("option",{value:"Colombo",children:"Colombo"}),(0,n.jsx)("option",{value:"Galle",children:"Galle"}),(0,n.jsx)("option",{value:"Gampaha",children:"Gampaha"}),(0,n.jsx)("option",{value:"Hambantota",children:"Hambantota"}),(0,n.jsx)("option",{value:"Jaffna",children:"Jaffna"}),(0,n.jsx)("option",{value:"Kalutara",children:"Kalutara"}),(0,n.jsx)("option",{value:"Kandy",children:"Kandy"}),(0,n.jsx)("option",{value:"Kegalle",children:"Kegalle"}),(0,n.jsx)("option",{value:"Kilinochchi",children:"Kilinochchi"}),(0,n.jsx)("option",{value:"Kurunegala",children:"Kurunegala"}),(0,n.jsx)("option",{value:"Mannar",children:"Mannar"}),(0,n.jsx)("option",{value:"Matale",children:"Matale"}),(0,n.jsx)("option",{value:"Matara",children:"Matara"}),(0,n.jsx)("option",{value:"Moneragala",children:"Moneragala"}),(0,n.jsx)("option",{value:"Mullaitivu",children:"Mullaitivu"}),(0,n.jsx)("option",{value:"Nuwara Eliya",children:"Nuwara Eliya"}),(0,n.jsx)("option",{value:"Polonnaruwa",children:"Polonnaruwa"}),(0,n.jsx)("option",{value:"Puttalam",children:"Puttalam"}),(0,n.jsx)("option",{value:"Ratnapura",children:"Ratnapura"}),(0,n.jsx)("option",{value:"Trincomalee",children:"Trincomalee"}),(0,n.jsx)("option",{value:"Vavuniya",children:"Vavuniya"})]}),D.touched.location&&D.errors.location&&(0,n.jsx)("div",{className:"fv-plugins-message-container",children:(0,n.jsx)("div",{className:"fv-help-block",children:D.errors.location})})]})]}),(0,n.jsxs)("div",{className:"row mb-6",children:[(0,n.jsx)("label",{className:"col-lg-4 col-form-label fw-bold fs-6",children:(0,n.jsx)("span",{className:"required",children:"Country"})}),(0,n.jsxs)("div",{className:"col-lg-8 fv-row",children:[(0,n.jsxs)("select",{className:"shadow-sm form-select form-select-solid form-select-lg fw-bold",...D.getFieldProps("country"),children:[(0,n.jsx)("option",{value:"",children:"Select a Country"}),y.map((e=>(0,n.jsx)("option",{value:e.cca2,children:e.name.common},e.cca2)))]}),D.touched.country&&D.errors.country&&(0,n.jsx)("div",{className:"fv-plugins-message-container",children:(0,n.jsx)("div",{className:"fv-help-block",children:D.errors.country})})]})]})]}),(0,n.jsx)("div",{className:"card-footer d-flex justify-content-end py-6 px-9",children:(0,n.jsxs)("button",{type:"submit",className:"btn btn-primary",disabled:N,children:[!N&&"Save Changes",N&&(0,n.jsxs)("span",{className:"indicator-progress",style:{display:"block"},children:["Please wait..."," ",(0,n.jsx)("span",{className:"spinner-border spinner-border-sm align-middle ms-2"})]})]})})]})})]})};function N(e){let{setRefresh:s,refresh:a}=e;return(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(b,{setRefresh:s,refresh:a})})}const v=e=>{let{refresh:s=!1}=e;const[a,i]=(0,l.useState)(null),d=localStorage.getItem("auth"),{theater:h}=d?JSON.parse(d):{theater:""};(0,l.useEffect)((()=>{(async()=>{try{const e=await(0,t.ie)("profile/details/"+h);i(e.data.data)}catch(e){(0,o.W)("Something Went Wrong","error")}})()}),[s]);(0,r.IT)(),(0,r.i6)();return a?(0,n.jsx)("div",{className:"card mb-5 mb-xl-10",children:(0,n.jsx)("div",{className:"card-body pt-9 pb-0",children:(0,n.jsxs)("div",{className:"d-flex flex-wrap flex-sm-nowrap mb-3",children:[(0,n.jsx)("div",{className:"me-7 mb-4",children:(0,n.jsxs)("div",{className:"symbol symbol-100px symbol-lg-160px symbol-fixed position-relative",children:[(0,n.jsx)("img",{src:t.S6+a.adminData.image,alt:"Metronic"}),(0,n.jsx)("div",{className:"position-absolute translate-middle bottom-0 start-100 mb-6 bg-success rounded-circle border border-4 border-white h-20px w-20px"})]})}),(0,n.jsx)("div",{className:"flex-grow-1",children:(0,n.jsxs)("div",{className:"d-flex justify-content-between align-items-start flex-wrap mb-2",children:[(0,n.jsxs)("div",{className:"d-flex flex-column",children:[(0,n.jsxs)("div",{className:"d-flex align-items-center mb-2",children:[(0,n.jsxs)("a",{className:"text-gray-800 text-hover-primary fs-2 fw-bolder me-1",children:[a.adminData.first_name," ",a.adminData.last_name]}),(0,n.jsx)("a",{href:"#",children:(0,n.jsx)(m.uY,{iconName:"verify",className:"fs-1 text-primary"})}),(0,n.jsx)("a",{className:"btn btn-sm btn-light-success fw-bolder ms-2 fs-8 py-1 px-3","data-bs-toggle":"modal","data-bs-target":"#kt_modal_upgrade_plan",children:"Pro"})]}),(0,n.jsxs)("div",{className:"d-flex flex-wrap fw-bold fs-6 mb-4 pe-2",children:[(0,n.jsxs)("a",{href:"#",className:"d-flex align-items-center text-gray-400 text-hover-primary me-5 mb-2",children:[(0,n.jsx)(m.uY,{iconName:"profile-circle",className:"fs-4 me-1"}),"Theater Admin"]}),(0,n.jsxs)("a",{href:"#",className:"d-flex align-items-center text-gray-400 text-hover-primary me-5 mb-2",children:[(0,n.jsx)(m.uY,{iconName:"geolocation",className:"fs-4 me-1"}),a.theaterData.location]}),(0,n.jsxs)("a",{href:"#",className:"d-flex align-items-center text-gray-400 text-hover-primary mb-2",children:[(0,n.jsx)(m.uY,{iconName:"sms",className:"fs-4 me-1"}),a.adminData.email]})]})]}),(0,n.jsxs)("div",{className:"d-flex my-4",children:[(0,n.jsxs)(c.cH,{to:"/movies",className:"btn btn-sm btn-light me-2",id:"kt_user_follow_button",children:[(0,n.jsx)(m.uY,{iconName:"check",className:"fs-3 d-none"}),(0,n.jsx)("span",{className:"indicator-label",children:"Manage Movies"}),(0,n.jsxs)("span",{className:"indicator-progress",children:["Please wait...",(0,n.jsx)("span",{className:"spinner-border spinner-border-sm align-middle ms-2"})]})]}),(0,n.jsx)(c.cH,{to:"/theater",className:"btn btn-sm btn-primary me-3",children:"Manage Theater"})]})]})})]})})}):null},g=[{title:"Account",path:"/crafted/account/overview",isSeparator:!1,isActive:!1},{title:"",path:"",isSeparator:!0,isActive:!1}],w=()=>{const[e,s]=(0,l.useState)(!1);return(0,n.jsx)(r.c5,{children:(0,n.jsxs)(r.kX,{element:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(v,{refresh:e}),(0,n.jsx)(r.yY,{})]}),children:[(0,n.jsx)(r.kX,{path:"overview",element:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(i.g1,{breadcrumbs:g,children:"Overview"}),(0,n.jsx)(d,{})]})}),(0,n.jsx)(r.kX,{path:"settings",element:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(i.g1,{breadcrumbs:g,children:"Settings"}),(0,n.jsx)(N,{refresh:e,setRefresh:s})]})}),(0,n.jsx)(r.kX,{index:!0,element:(0,n.jsx)(r.YX,{to:"/crafted/account/overview"})})]})})}}}]);
//# sourceMappingURL=588.c67f66a2.chunk.js.map